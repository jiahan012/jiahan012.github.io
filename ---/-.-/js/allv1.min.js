var logFileSimple=[];if(localStorage.getItem("logFile"))var logFile=JSON.parse(localStorage.getItem("logFile"));else logFile=[];function game2s(e){var a=e;$("#game1-content").addClass("game2-content"),$("#game1-content").css("background-image","url('images/game2_bg.jpg')"),$("header").css("display","none"),$("#game2-default-btn").css("display","none"),$("#game2-half-btn").css("display","none"),$("#game2-match-btn").css("display","none"),$("#game2StartPage").css("display","block"),$("#game-notify").css("display","none"),$("#game2").css("display","none"),$("#game2StartBtn").on("click",function(){$("#game2StartPage").css("display","none"),$("header").css("display","block"),$("#game2-default-btn").css("display","block"),$("#game2-half-btn").css("display","inline-block"),$("#game2-match-btn").css("display","inline-block"),$("#game2").css("display","block"),game2(a)})}function game2(e){clearInterval(l);for(var a=setInterval(";"),t=0;t<a;t++)clearInterval(t);logFile.push("第一關遊戲開始(A)\n"),logFileSimple.push("A"),db.ref(fullDbUrl+"Detail").push("第一關遊戲開始(A)\n"),$("#qa_total").hide();var l,s=e,i=180,n=$(".second_top-time span");n.text(i),$("#game-notify").css("display","block"),$("#game-notify-text").text("請選擇2張牌，若選出同義的單字與圖像即正確，若選出不同義則翻回。");var d=function(){i>=0?(n.text(i),i--,clearInterval(l),l=setInterval(d,1e3)):(clearInterval(l),$("#nextModalMessage").html("遊戲結束。\n</br>即將進入下一關遊戲"),$("#nextModal").modal({backdrop:"static",keyboard:!1}),logFile.push("遊戲分數:"+s+"\n"),logFile.push("此關遊戲得分:"+s+"\n"),logFile.push("第一關遊戲結束-配對未完成(W)\n"),logFile.push("\n"),logFileSimple.push("W"),db.ref(fullDbUrl+"Detail").push("遊戲分數:"+s),db.ref(fullDbUrl+"Detail").push("此關遊戲得分:"+s),db.ref(fullDbUrl+"Detail").push("第一關遊戲結束-配對未完成(W)"),$("#nextModal").on("hidden.bs.modal",function(e){$("#game2").css("display","none"),game3s(s)}))};l=setInterval(d,1e3),function(){var e=0,a=[{index:0,type:1,text:"purchase"},{index:1,type:1,img:"1.png"},{index:2,type:2,text:"jealous"},{index:3,type:2,img:"2.png"},{index:4,type:3,text:"lonely"},{index:5,type:3,img:"3.png"},{index:6,type:4,text:"creative"},{index:7,type:4,img:"4.png"},{index:8,type:5,text:"target"},{index:9,type:5,img:"5.png"},{index:10,type:6,text:"examination"},{index:11,type:6,img:"6.png"},{index:12,type:7,text:"elementary student"},{index:13,type:7,img:"7.png"},{index:14,type:8,text:"persuade"},{index:15,type:8,img:"8.png"},{index:16,type:9,text:"basketball"},{index:17,type:9,img:"9.png"}];a.sort(function(e,a){return Math.random()>.5?-1:1}),$("#game2-half-btn").attr("disabled",!0);var t="";$.each(a,function(e,l){0!=e&&6!=e&&12!=e||(t+='<div class="half-line half-line-'+e+' row">'),t+='<div class="col-22">',t+='<div class="flip_card-container">',t+='<div class="flip_card-item" data-index="'+a[e].index+'" data-value="'+a[e].type+'">',t+='<div class="front face">',t+='<img src="images/card.png">',t+="</div>",t+='<div class="back face">',a[e].hasOwnProperty("text")?t+='<h3 class="facevalue">'+a[e].text+"</h3>":t+='<img width="100%" src="images/'+a[e].img+'"/>',t+="</div>",t+='</div><img src="images/card_height.png"></div></div>',5!=e&&11!=e&&17!=e||(t+="</div>")}),$("#cardcard").html(t);var n=0,d=Number,o=Number,r=!1,p="",c=$(".flip_card-item"),g=[];function m(){$("#game-notify").css("display","none"),setTimeout(function(){$("#nextModalMessage").html("遊戲結束。\n</br>即將進入下一關遊戲"),$("#nextModal").modal({backdrop:"static",keyboard:!1}),clearInterval(l),logFile.push("遊戲分數:"+s+"\n"),logFile.push("此關遊戲得分:"+s+"\n"),logFile.push("此關花費時間:"+(180-i)+"\n"),logFile.push("第一關遊戲結束-配對皆完成(F)\n"),logFile.push("\n"),logFileSimple.push("F"),db.ref(fullDbUrl+"Detail").push("遊戲分數:"+s),db.ref(fullDbUrl+"Detail").push("此關遊戲得分:"+s),db.ref(fullDbUrl+"Detail").push("此關花費時間:"+(180-i)),db.ref(fullDbUrl+"Detail").push("第一關遊戲結束-配對皆完成(F)"),$("#nextModal").on("hidden.bs.modal",function(e){$("#game2").css("display","none"),game3s(s)})},1500)}c.on("click",function(){var a;$(this).addClass("rotation"),d=$(this).data("value"),o=$(this).data("index"),logFile.push(i+"秒--------------\x3e翻出"+d+"\n"),$("#game2-half-btn").attr("disabled",!1),$("#game2-match-btn").attr("disabled",!0),$("#game-notify-text").text("請選擇2張牌，若選出同義的單字與圖像即正確，若選出不同義則翻回。"),n%2!=0&&d!==p?($("#game2-match-btn").attr("disabled",!0),logFile.push("配對失敗(C)\n"),logFileSimple.push("C"),db.ref(fullDbUrl+"Detail").push("配對失敗(C)"),c.addClass("pointer_none"),setTimeout(function(){$('.flip_card-item[data-value="'+p+'"]').removeClass("rotation box-shadow"),$('.flip_card-item[data-value="'+d+'"]').removeClass("rotation box-shadow")},800),setTimeout(function(){c.removeClass("pointer_none"),n=0,p="",$("#game2-match-btn").attr("disabled",!1)},1e3),$("#game2-half-btn").attr("disabled",!0),$(".half-line").removeClass("support-shadow"),r=!1):(p=d,++n>0&&n%2==0&&(e++,s+=r?15:30,$("#game_score").text(s),a=p,g.push(p),setTimeout(function(){$('.flip_card-item[data-value="'+a+'"]').addClass("success-shadow")},300),logFile.push("配對成功(M)\n"),logFileSimple.push("M"),db.ref(fullDbUrl+"Detail").push("配對成功(M)"),$("#game2-half-btn").attr("disabled",!0),$("#game2-match-btn").attr("disabled",!1),$(".half-line").removeClass("support-shadow"),r=!1,9===e&&m()))}),$("#game2-match-btn").on("click",function(){logFile.push(i+"秒--------------\x3e消除一組配對(T)\n"),logFileSimple.push("T"),db.ref(fullDbUrl+"Detail").push(i+"秒--------------\x3e消除一組配對(T)"),function a(){$("#game2-match-btn").attr("disabled",!0);var t,l,s=(t=1,l=9,Math.floor(Math.random()*(l-t+1))+t);if(g.length>=1){var i;for(i=0;i<g.length;i++)if(g[i]===s)return void a();$('.flip_card-item[data-value="'+s+'"]').addClass("rotation").addClass("success-shadow"),e++,g.push(s),$("#game2-match-btn").attr("disabled",!1)}else $('.flip_card-item[data-value="'+s+'"]').addClass("rotation").addClass("success-shadow"),e++,g.push(s),$("#game2-match-btn").attr("disabled",!1);9===e&&($("#game2-match-btn").attr("disabled",!0),m())}()}),$("#game2-half-btn").on("click",function(){var e;(e=a.findIndex(e=>e.index!=o&&e.type==d))>=0&&e<6?$(".half-line-0").addClass("support-shadow"):e>=6&&e<12?$(".half-line-6").addClass("support-shadow"):e>=12&&e<18&&$(".half-line-12").addClass("support-shadow"),$("#game2-half-btn").attr("disabled",!0),r=!0,logFile.push(i+"秒--------------\x3e提示範圍(O)\n"),logFileSimple.push("O"),db.ref(fullDbUrl+"Detail").push(i+"秒--------------\x3e提示範圍(O)")})}()}