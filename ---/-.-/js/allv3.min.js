function game4s(e){var t=e;$("#game4").css("display","none"),$("#game1-content").css("background-image","url('images/game4_bg.jpg')"),$("#game-notify").css("display","none"),$("header").css("display","none"),$("#game3StartPage").css("display","none"),$("#game4StartPage").css("display","block"),$("#xtoo_btn").attr("disabled",!0),$("#x_ex_o_btn").attr("disabled",!0),$("#game4StartBtn").on("click",function(){$("#game4StartPage").css("display","none"),$("header").css("display","block"),$("#game4").css("display","block"),$(".bingo_line").css("display","inline-block"),$(".base_qa_line").css("display","none"),game4(t)})}function game4(e){clearInterval(i);for(var t=setInterval(";"),a=0;a<t;a++)clearInterval(a);$("#game-notify").css("display","block"),$("#game-notify-text").text("點選1個方格並回答該格的問題，若達成賓果線即可得分，得到4條賓果線則完成遊戲。"),logFile.push("第三關遊戲開始(b)\n"),logFileSimple.push("b"),db.ref(fullDbUrl+"Detail").push("第三關遊戲開始(b)");var n=e;$("#game_score").text(n);var i,o=720,s=$(".second_top-time span");s.text(o);var l,r=function(){o>=0?(s.text(o),o--,clearInterval(i),i=setInterval(r,1e3)):(clearInterval(i),$("#nextModalMessage").html("遊戲結束。\n</br>即將進入下一關遊戲"),$("#nextModal").modal({backdrop:"static",keyboard:!1}),logFile.push("遊戲分數:"+n+"\n"),logFile.push("此關遊戲得分:"+(n-e)+"\n"),logFile.push("第三關遊戲結束-時間到，題目未作答完(o)\n"),logFile.push("\n"),logFileSimple.push("o"),db.ref(fullDbUrl+"Detail").push("遊戲分數:"+n),db.ref(fullDbUrl+"Detail").push("此關遊戲得分:"+(n-e)),db.ref(fullDbUrl+"Detail").push("第三關遊戲結束-時間到，題目未作答完(o)"),$("#game4_popup").css("display","none"),$("#nextModal").on("hidden.bs.modal",function(e){$("#game4").css("display","none"),game5s(n)}))};i=setInterval(r,1e3);var c="",d="",_=0,p=3,u=!1,g=!1,h=1,m=30,y=31,f=3;$("#game4_remain").text(f);var b=document.getElementById("xtoo_btn"),v=document.getElementById("x_ex_o_btn");const x="☆",w="O",M="X",k=[[0,1,2,3,4],[5,6,7,8,9],[10,11,12,13,14],[15,16,17,18,19],[20,21,22,23,24],[0,5,10,15,20],[1,6,11,16,21],[2,7,12,17,22],[3,8,13,18,23],[4,9,14,19,24],[0,6,12,18,24],[4,8,12,16,20]];var D=[{img:"02.jpg",title:"Mary really enjoys the time spent in the extracurricular activities in which she __________.",answer:"participates",voice:"Mary really enjoys the time spent in the extracurricular activities in which she participates."},{img:"01.jpg",title:"When John was an elementary student, John did not like Mary because she always had ________ colors in her hair.",answer:"diverse",voice:"When John was an elementary student, John did not like Mary because she always had diverse colors in her hair."},{img:"03.jpg",title:"Mary could not ________ herself to doing great works for her PhD study.",answer:"devote",voice:"Mary could not devote herself to doing great works for her PhD study."},{img:"04.jpg",title:"Mary's parents are very unsatisfied with her performance and decide to stop ________ support for her completely.",answer:"financial",voice:"Mary's parents are very unsatisfied with her performance and decide to stop financial support for her completely."},{img:"15.jpg",title:"The future of work lies in learning, working, and playing ________ so we cannot ignore any aspect.",answer:"concurrently",voice:"The future of work lies in learning, working, and playing concurrently so we cannot ignore any aspect."},{img:"05.jpg",title:"All students are very ________ of her intelligence.",answer:"jealous",voice:"All students are very jealous of her intelligence."},{img:"09.jpg",title:"Mary successfully passed the ________.",answer:"examination",voice:"Mary successfully passed the examination."},{img:"06.jpg",title:"Mary is not ________ at all due to the fact that she enjoys reading.",answer:"lonely",voice:"Mary is not lonely at all due to the fact that she enjoys reading."},{img:"07.jpg",title:"Mary's hobbies include attending the church and playing a variety of digital games with her ________",answer:"cousins",voice:"Mary's hobbies include attending the church and playing a variety of digital games with her cousins"},{img:"08.jpg",title:"Digital games are useful vehicles to develop ________ thinking.",answer:"critical",voice:"Digital games are useful vehicles to develop critical thinking."},{img:"09.jpg",title:"Mary has enough money to ________ a lot of clothes that she did not need.",answer:"purchase",voice:"Mary has enough money to purchase a lot of clothes that she did not need."},{img:"10.jpg",title:"Mary could ________ her financial resources.",answer:"exhaust",voice:"Mary could exhaust her financial resources."},{img:"02.jpg",title:"Mary has not eaten any food for two days but she is very pleased and extremely happy to take part in __________ activities.",answer:"extracurricular",voice:"Mary has not eaten any food for two days but she is very pleased and extremely happy to take part in extracurricular activities."},{img:"11.jpg",title:"John sometimes plays ________ with his classmates.",answer:"basketball",voice:"John sometimes plays basketball with his classmates."},{img:"12.jpg",title:"The hospital could charge your ________.",answer:"insurance",voice:"The hospital could charge your insurance."},{img:"13.jpg",title:"Mary can achieve her ________ because her parents provide a lot of financial support and offer constructive advice.",answer:"targets",voice:"Mary can achieve her targets because her parents provide a lot of financial support and offer constructive advice."},{img:"14.jpg",title:"There is no way to ________ Mary to drink milk is needed.",answer:"persuade",voice:"There is no way to persuade Mary to drink milk is needed."},{img:"16.jpg",title:"It is ________ to say that most people are not as lazy as Mary.",answer:"needless",voice:"It is needless to say that most people are not as lazy as Mary."},{img:"03.jpg",title:"Mary is not ________ to complete her PhD study.",answer:"motivated",voice:"Mary is not motivated to complete her PhD study."},{img:"01.jpg",title:"When John was an ________ student, John did not like Mary because she always had diverse colors in her hair.",answer:"elementary",voice:"When John was an elementary student, John did not like Mary because she always had diverse colors in her hair."},{img:"11.jpg",title:"The library is their ________ place.",answer:"disfavored",voice:"The library is their disfavored place."},{img:"06.jpg",title:"Mary's favorite ________ is reading.",answer:"hobby",voice:"Mary's favorite hobby is reading."},{img:"08.jpg",title:"Digital games help Mary have ________ imagination.",answer:"creative",voice:"Digital games help Mary have creative imagination."},{img:"04.jpg",title:"Mary's parents want to change her wrong ________ toward her PhD.",answer:"attitude",voice:"Mary's parents want to change her wrong attitude toward her PhD."},{img:"13.jpg",title:"A lot of people know that Mary has ________ parents.",answer:"remarkable",voice:"A lot of people know that Mary has remarkable parents."}];const j=document.querySelectorAll(".cell");function F(e){if(c=e.target.id,u){S(e.target.id,w),u=!1;for(var t=0;t<l.length;t++)"number"==typeof l[t]?j[t].classList.remove("ooxx_pointer_none"):l[t]==x?(j[t].classList.remove("ooxx_pointer_none"),j[t].classList.remove("ready_pointer")):l[t]==w?(j[t].classList.remove("ooxx_pointer_none"),j[t].classList.remove("ready_pointer")):l[t]==M&&(j[t].classList.remove("ooxx_pointer_none"),j[t].classList.remove("ready_pointer"));return l.includes(M)?b.disabled=!(p>=1):b.disabled=!0,void(p<1&&(b.disabled=!0,v.disabled=!0))}if(g){if(1===h){m=e.target.id,j[e.target.id].classList.add("x_ex_o_pointer_none");for(t=0;t<l.length;t++)l[t]==w?(j[t].classList.add("ready_pointer"),j[t].classList.remove("ooxx_pointer_none")):l[t]==M&&(j[t].classList.remove("ready_pointer"),j[t].classList.add("ooxx_pointer_none"));return h=2,void $("#game-notify-text").text("再選擇要交換的O項目。")}if(2===h){y=e.target.id,j[e.target.id].classList.add("x_ex_o_pointer_none"),l[m]=w,document.getElementById(m).innerText=w,S(y,M);for(t=0;t<l.length;t++)"number"==typeof l[t]?j[t].classList.remove("ooxx_pointer_none"):l[t]==x?(j[t].classList.remove("ooxx_pointer_none"),j[t].classList.remove("ready_pointer")):l[t]==w?(j[t].classList.remove("ooxx_pointer_none"),j[t].classList.remove("ready_pointer")):l[t]==M&&(j[t].classList.remove("ooxx_pointer_none"),j[t].classList.remove("ready_pointer")),j[t].classList.contains("x_ex_o_pointer_none")&&j[t].classList.remove("x_ex_o_pointer_none");return h=1,g=!1,l.includes(M)&&l.includes(w)?v.disabled=!(p>=1):v.disabled=!0,void(p<1&&(b.disabled=!0,v.disabled=!0))}}"number"==typeof l[e.target.id]&&($(".game4_input").val(""),$("#game4_popup").css("display","block"),$(".game4_title").html("<p>"+D[c].title+"</p>"),$("#game4_popup_img").html('<img  src="images/'+D[c].img+'"/>'))}function L(e){$("#game4_popup").css("display","none"),"number"==typeof l[e]&&S(e,w),$("#alertModalMessage").html("很棒!答對了!"),$("#alertModal").modal({backdrop:"static",keyboard:!1}),logFile.push(o+"秒--------------\x3e答題正確得到O(s)\n"),logFileSimple.push("s"),db.ref(fullDbUrl+"Detail").push(o+"秒--------------\x3e答題正確得到O(s)"),f=3,$("#game4_remain").text(f)}function S(t,a){l[t]=a,document.getElementById(t).innerText=a;!function(t,a){let s=t.reduce((e,t,a)=>t===w?e.concat(a):e,[]),l=[];for(let[e,t]of k.entries())if(t.every(e=>s.indexOf(e)>-1)){var r={index:e,player:w};l.push(r);for(var c=0;c<k[e].length;c++){var d=k[e][c];document.getElementById(d).style.backgroundColor="#55d6c1"}n+=75,_++,$("#game_score").html(n),$("#bingo_line").html(_),logFile.push(o+"秒--------------\x3e得到賓果線(r)\n"),logFileSimple.push("r"),db.ref(fullDbUrl+"Detail").push(o+"秒--------------\x3e得到賓果線(r)"),k.splice(e,1)}_>=4&&(clearInterval(i),$("#nextModalMessage").html("恭喜得到4條賓果線\n遊戲結束\n</br>即將進入下一關遊戲"),$("#nextModal").modal({backdrop:"static",keyboard:!1}),logFile.push("遊戲分數:"+n+"\n"),logFile.push("此關遊戲得分:"+(n-e)+"\n"),logFile.push("此關花費時間:"+(720-o)+"\n"),logFile.push("第三關遊戲結束-全部題目作答完(e)\n"),logFile.push("\n"),logFileSimple.push("e"),db.ref(fullDbUrl+"Detail").push("遊戲分數:"+n),db.ref(fullDbUrl+"Detail").push("此關遊戲得分:"+(n-e)),db.ref(fullDbUrl+"Detail").push("此關花費時間:"+(720-o)),db.ref(fullDbUrl+"Detail").push("第三關遊戲結束-全部題目作答完(e)"),$("#nextModal").on("hidden.bs.modal",function(e){$("#game4").css("display","none"),game5s(n)}))}(l);console.log(l.includes()),console.log(l.includes(M)),console.log(l.includes(w)),console.log(l),console.log(p),l.includes(M)&&l.includes(w)&&(p>=1?($("#xtoo_btn").attr("disabled",!1),$("#x_ex_o_btn").attr("disabled",!1),$("#game-notify-text").text("適當時機，可以使用3次機會的輔助功能，幫助你有效得到賓果線。")):($("#xtoo_btn").attr("disabled",!0),$("#x_ex_o_btn").attr("disabled",!0),$("#game-notify-text").text("請點選1項方格，並回答該方格的問題，若達成賓果線，即可得分。"))),l.includes(M)||$("#x_ex_o_btn").attr("disabled",!0),l.includes(M)&&p>=1&&$("#xtoo_btn").attr("disabled",!1);var s=l.every(function(e,t,a){return"number"!=typeof e});console.log("ans",s),s&&p<=0&&_<4&&($("#nextModalMessage").html("遊戲結束。\n</br>即將進入下一關遊戲"),$("#nextModal").modal({backdrop:"static",keyboard:!1}),logFile.push("遊戲分數:"+n+"\n"),logFile.push("此關遊戲得分:"+(n-e)+"\n"),logFile.push("第三關遊戲結束-作答完畢，未達4條賓果線(u)\n"),logFile.push("\n"),logFileSimple.push("u"),db.ref(fullDbUrl+"Detail").push("遊戲分數:"+n),db.ref(fullDbUrl+"Detail").push("此關遊戲得分:"+(n-e)),db.ref(fullDbUrl+"Detail").push("第三關遊戲結束-作答完畢，未達4條賓果線(u)"),$("#game4_popup").css("display","none"),$("#nextModal").on("hidden.bs.modal",function(e){$("#game4").css("display","none"),game5s(n)}))}$("#xtoo_btn").on("click",function(){logFile.push(o+"秒--------------\x3eX變成O按鈕(i)\n"),logFileSimple.push("i"),db.ref(fullDbUrl+"Detail").push(o+"秒--------------\x3eX變成O按鈕(i)"),function(){if(l.includes(M)&&p>=1){b.disabled=!1,u=!0,(p-=1)>=1?$("#op_line").html(p):(p=0,$("#op_line").html(0));for(var e=0;e<l.length;e++)"number"==typeof l[e]?j[e].classList.add("ooxx_pointer_none"):l[e]==w?j[e].classList.add("ooxx_pointer_none"):l[e]==M&&j[e].classList.add("ready_pointer");$("#game-notify-text").text("請選擇1個X項目，該項目即可變成O。")}}()}),$("#x_ex_o_btn").on("click",function(){logFile.push(o+"秒--------------\x3eX與O交換按鈕(x)\n"),logFileSimple.push("x"),db.ref(fullDbUrl+"Detail").push(o+"秒--------------\x3eX與O交換按鈕(x)"),function(){if(l.includes(M)&&l.includes(w)&&p>=1){v.disabled=!1,g=!0,(p-=1)>=1?$("#op_line").html(p):(p=0,$("#op_line").html(0));for(var e=0;e<l.length;e++)"number"==typeof l[e]?j[e].classList.add("ooxx_pointer_none"):l[e]==x?j[e].classList.add("ooxx_pointer_none"):l[e]==w?j[e].classList.add("ooxx_pointer_none"):l[e]==M&&j[e].classList.add("ready_pointer");$("#game-notify-text").text("請先選擇要交換的X項目。")}}()}),$("#game4_cancel").on("click",function(){$("#game4NextModal").modal({backdrop:"static",keyboard:!1})}),$("#game4NextRight").on("click",function(){logFile.push(o+"秒--------------\x3e放棄按鈕得到X(g)\n"),logFileSimple.push("g"),db.ref(fullDbUrl+"Detail").push(o+"秒--------------\x3e放棄按鈕得到X(g)"),$("#game4NextModal").css("display","none"),$("#game4_popup").css("display","none"),S(c,M)}),$("#game4NextCancel").on("click",function(){$("#game4NextModal").css("display","none")}),$("#game4_submit").on("click",function(){f--,$("#game4_remain").text(f),f>0?$("input[type=text][name=username]").val()===D[c].answer?($("input[type=text][name=username]").val(""),L(c)):($("input[type=text][name=username]").val(""),$("#alertModalMessage").html("答錯了!"),$("#alertModal").modal({backdrop:"static",keyboard:!1})):f<=0&&($("input[type=text][name=username]").val()===D[c].answer?($("input[type=text][name=username]").val(""),L(c)):($("input[type=text][name=username]").val(""),$("#alertModalMessage").html("答錯了!"),$("#alertModal").modal({backdrop:"static",keyboard:!1}),logFile.push(o+"秒--------------\x3e答題錯誤得到X(w)\n"),logFileSimple.push("w"),db.ref(fullDbUrl+"Detail").push(o+"秒--------------\x3e答題錯誤得到X(w)"),f=3,$("#game4_remain").text(f),$("#game4_popup").css("display","none"),S(c,M)))}),$(".game4_input").focus(function(){});var U=window.speechSynthesis,I=(document.querySelector("form"),document.getElementById("answer")),O=[];function X(){O=U.getVoices().sort(function(e,t){const a=e.name.toUpperCase(),n=t.name.toUpperCase();return a<n?-1:a==n?0:1})}X(),void 0!==speechSynthesis.onvoiceschanged&&(speechSynthesis.onvoiceschanged=X),$("#play").on("click",function(e){d=D[c].voice,e.preventDefault(),function(){if(U.speaking)console.error("speechSynthesis.speaking");else if(""!==I.value){var e=new SpeechSynthesisUtterance(d);e.onend=function(e){},e.onerror=function(e){console.error("SpeechSynthesisUtterance.onerror")},e.voice=O[20],e.pitch=1,e.rate=.7,-1!=navigator.userAgent.indexOf("Mac OS X")&&(e.voice=O[0],e.rate=.9),U.speak(e),logFile.push(o+"秒--------------\x3e發音按鈕(v)\n"),logFileSimple.push("v"),db.ref(fullDbUrl+"Detail").push(o+"秒--------------\x3e發音按鈕(v)")}}(),$("input[type=text][name=username]").blur()}),function(){document.querySelector(".endgame").style.display="none",l=Array.from(Array(25).keys());for(var e=0;e<j.length;e++)j[e].innerHTML='<img class="cell_img" id="'+e+'" src="images/'+D[e].img+'"/>',j[e].style.removeProperty("background-color");const t=document.querySelectorAll(".cell");for(e=0;e<t.length;e++)t[e].addEventListener("click",F,!1);$("#bingo_line").html(_),$("#op_line").html(p)}()}