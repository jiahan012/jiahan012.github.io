var logFile=[],logFileSimple=[];function game1s(){$("#game1StartBtn").on("click",function(){$("#game1StartPage").css("display","none"),$("header").css("display","block"),$("#game1").css("display","block"),game1()})}function game1(){var e,l=90,t=$(".second_top-time span"),s=$(".question h5"),r=$(".answers button"),o=$(".answers .btn1"),a=$(".answers .btn2"),i=$(".answers .btn3"),n=$(".answers .btn4"),p=$(".img_support"),g=$(".word_support"),d=$(".clause_support"),u=0,h=15,c=1e3,b=1,m=0,f=!0;logFile.push("任務測驗開始(D)\n"),logFileSimple.push("D"),db.ref(fullDbUrl+"Detail").push("任務測驗開始(D)"),$("#game_score_box").css("display","none"),$("#game-notify").css("display","block"),$("#game-notify-text").text("請於右下方4個選項中，選擇1項答案，若答題困難，可於左下方使用輔助提示功能。");var x=function(){if(l>=0)t.text(l),l--;else{if(b>h+1)return void clearInterval(e);logFile.push(l+"秒--------------\x3e時間到未答題正確(U)\n"),logFileSimple.push("U"),db.ref(fullDbUrl+"Detail").push(l+"秒--------------\x3e時間到未答題正確(U)"),c-=100,$("#score").html(c),l=90,t.text(l),_(++u)}clearInterval(e),e=setInterval(x,1e3)};function _(l){if((b+=1)>h+1)return $("#score").text(c),clearInterval(e),$("#nextModalMessage").html("學習任務結束。\n</br>即將進入下一關遊戲"),$("#nextModal").modal({backdrop:"static",keyboard:!1}),logFile.push("任務得分:"+c+"\n"),logFile.push("任務測驗結束(E)\n"),logFile.push("\n"),logFileSimple.push("E"),db.ref(fullDbUrl+"Detail").push("任務得分:"+c),db.ref(fullDbUrl+"Detail").push("任務測驗結束(E)"),db.ref(fullDbUrl+"SimpleMission").push(logFileSimple),db.ref(fullDbUrl+"Astep").set({step:3}),localStorage.setItem("Astep",3),void $("#nextModal").on("hidden.bs.modal",function(e){$("#game1").css("display","none"),$("#game2").css("display","block"),$("#mission_score_box").css("display","none"),$("#game_score_box").css("display","block"),db.ref(fullDbUrl+"Astep").set({step:3}),localStorage.setItem("Astep",3),logFile.push(logFileSimple.join("")),logFile.push("\n\n"),localStorage.setItem("logFile",JSON.stringify(logFile))});$("#topic").html(b),d.hide(),p.hide(),g.hide(),a.attr("disabled",!1),i.attr("disabled",!1),$(".image_toggle").attr("disabled",!1),$(".word_toggle").attr("disabled",!1),$(".clause_toggle").attr("disabled",!1),$(".remove_toggle").attr("disabled",!1),s.text(b+". "+testArray[l].question),o.text("A. "+testArray[l].answers[0].answer),a.text("B. "+testArray[l].answers[1].answer),i.text("C. "+testArray[l].answers[2].answer),n.text("D. "+testArray[l].answers[3].answer),d.text(testArray[l].support),p.attr("src",testArray[l].img),g.html(testArray[l].wordSupport),logFile.push("第"+b+"題\n"),db.ref(fullDbUrl+"Detail").push("第"+b+"題")}function w(){c<=0&&(c=0,$("#score").html(c),$("#nextModalMessage").html("任務得分為0。\n</br>即將進入下一關遊戲"),$("#nextModal").modal({backdrop:"static",keyboard:!1}),logFile.push("任務得分:"+c+"\n"),logFile.push("任務測驗結束(E)\n"),logFile.push("\n"),logFileSimple.push("E"),db.ref(fullDbUrl+"Detail").push("任務得分:"+c),db.ref(fullDbUrl+"Detail").push("任務測驗結束(E)"),db.ref(fullDbUrl+"SimpleMission").push(logFileSimple),$("#nextModal").on("hidden.bs.modal",function(e){$("#game1").css("display","none"),$("#game2").css("display","block"),$("#mission_score_box").css("display","none"),$("#game_score_box").css("display","block"),db.ref(fullDbUrl+"Astep").set({step:3}),localStorage.setItem("Astep",3),logFile.push(logFileSimple.join("")),logFile.push("\n\n"),localStorage.setItem("logFile",JSON.stringify(logFile))}))}e=setInterval(x,1e3),$(".image_toggle").on("click",function(){$(this).attr("disabled",!0),p.show(),$(".text_toggle").attr("disabled",!1),d.hide(),$(".clause_toggle").attr("disabled",!1),$(".word_toggle").attr("disabled",!1),g.hide(),c-=30,$("#score").html(c),logFile.push(l+"秒--------------\x3e圖片提示(P)\n"),logFileSimple.push("P"),db.ref(fullDbUrl+"Detail").push(l+"秒--------------\x3e圖片提示(P)"),w()}),$(".word_toggle").on("click",function(){$(this).attr("disabled",!0),g.show(),$(".image_toggle").attr("disabled",!1),p.hide(),$(".text_toggle").attr("disabled",!1),d.hide(),$(".clause_toggle").attr("disabled",!1),c-=30,$("#score").html(c),logFile.push(l+"秒--------------\x3e單字提示(V)\n"),logFileSimple.push("V"),db.ref(fullDbUrl+"Detail").push(l+"秒--------------\x3e單字提示(V)"),w()}),$(".clause_toggle").on("click",function(){$(this).attr("disabled",!0),d.show(),$(".image_toggle").attr("disabled",!1),p.hide(),$(".word_toggle").attr("disabled",!1),g.hide(),c-=30,$("#score").html(c),logFile.push(l+"秒--------------\x3e文法提示(S)\n"),logFileSimple.push("S"),db.ref(fullDbUrl+"Detail").push(l+"秒--------------\x3e文法提示(S)"),w()}),$(".remove_toggle").on("click",function(){var e;for($(this).attr("disabled",!0),e=0;e<testArray[u].answers.length;e++)!0===testArray[u].answers[2].isright?a.attr("disabled",!0):i.attr("disabled",!0);c-=30,$("#score").html(c),logFile.push(l+"秒--------------\x3e刪去選項(R)\n"),logFileSimple.push("R"),db.ref(fullDbUrl+"Detail").push(l+"秒--------------\x3e刪去選項(R)"),$(".clause_toggle").attr("disabled",!1),$(".image_toggle").attr("disabled",!1),$(".word_toggle").attr("disabled",!1),w()}),r.on("click",function(){!function(s){if(!0!==testArray[u].answers[s].isright)return c-=50,$(".light-1").removeClass("btn-success").addClass("btn-outline-success"),$(".light-2").removeClass("btn-success").addClass("btn-outline-success"),$(".light-3").removeClass("btn-success").addClass("btn-outline-success"),$("#score").text(c),2===++m&&($("#exampleModalCenter").modal({backdrop:"static",keyboard:!1}),clearInterval(e)),1===m&&($("#alertModalMessage").html("答錯囉!再接再厲!\n</br><p style='font-size:18px;margin-top:15px;'>可以使用提示功能幫助你學習。</p>"),$("#alertModal").modal({backdrop:"static",keyboard:!1})),logFile.push(l+"秒--------------\x3e答題錯誤(N)\n"),logFileSimple.push("N"),db.ref(fullDbUrl+"Detail").push(l+"秒--------------\x3e答題錯誤(N)"),!1;u++,l=90,t.text(l),p.hide(),d.hide(),g.hide(),m=0,c+=100,$("#score").text(c),b<h+1&&($("#alertModalMessage").html("很棒!答對了!"),$("#alertModal").modal({backdrop:"static",keyboard:!1})),logFile.push(l+"秒--------------\x3e答題正確(Y)\n"),logFileSimple.push("Y"),db.ref(fullDbUrl+"Detail").push(l+"秒--------------\x3e答題正確(Y)"),_(u)}($(this).index())}),$("#nextModalRight").on("click",function(){location.href="step.html"}),$(".wrong_support_translate_toggle").on("click",function(){$(".wrong_support_toggle").hide(),$(".wrong_support").show(),$(".wrong_support").html("<h5>文章翻譯:</h5>"+testArray[u].translateSupport+"</br>"),f=!1,logFile.push(l+"秒--------------\x3e答錯2次選擇文章翻譯(T)\n"),logFileSimple.push("T"),db.ref(fullDbUrl+"Detail").push(l+"秒--------------\x3e答錯2次選擇文章翻譯(T)")}),$(".wrong_support_word_toggle").on("click",function(){$(".wrong_support_toggle").hide(),$(".wrong_support").show(),$(".wrong_support").html("<h5>單字提示:</h5>"+testArray[u].wordSupport+"</br>"),f=!1,logFile.push(l+"秒--------------\x3e答錯2次選擇單字提示(B)\n"),logFileSimple.push("B"),db.ref(fullDbUrl+"Detail").push(l+"秒--------------\x3e答錯2次選擇單字提示(B)")}),$(".wrong_support_clause_toggle").on("click",function(){$(".wrong_support_toggle").hide(),$(".wrong_support").show(),$(".wrong_support").html("<h5>文法提示:</h5>"+testArray[u].support+"</br>"),f=!1,logFile.push(l+"秒--------------\x3e答錯2次選擇文法提示(G)\n"),logFileSimple.push("G"),db.ref(fullDbUrl+"Detail").push(l+"秒--------------\x3e答錯2次選擇文法提示(G)")}),$(".next_q").on("click",function(){f&&(logFile.push(l+"秒--------------\x3e答錯2次直接選擇下一題(X)\n"),logFileSimple.push("X"),db.ref(fullDbUrl+"Detail").push(l+"秒--------------\x3e答錯2次直接選擇下一題(X)")),u++,l=90,t.text(l),e=setInterval(x,1e3),d.hide(),p.hide(),g.hide(),m=0,f=!0,$(".wrong_support_toggle").show(),$(".wrong_support").hide(),$("#score").text(c),_(u)}),logFile.push("第1題\n"),db.ref(fullDbUrl+"Detail").push("第1題"),s.text(b+". "+testArray[u].question),o.text("A. "+testArray[u].answers[0].answer),a.text("B. "+testArray[u].answers[1].answer),i.text("C. "+testArray[u].answers[2].answer),n.text("D. "+testArray[u].answers[3].answer),p.attr("src",testArray[u].img),d.text(testArray[u].support),g.html(testArray[u].wordSupport)}